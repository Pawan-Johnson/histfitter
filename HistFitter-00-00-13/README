SUSY Channel combination package:
---------------------------------
Last update: 2012/06/12

Main documentation:
https://twiki.cern.ch/twiki/bin/viewauth/AtlasProtected/SusyFitter 

Tutorial wiki:
https://twiki.cern.ch/twiki/bin/viewauth/AtlasProtected/HistFitterTutorial

Mailing-list, for *any* of your questions:
HistFitter Group <atlas-phys-susy-histfitter@cern.ch>


Setup:
------
source setup.sh     (from lxplus)
source setupAFS.sh  (from non-lxplus machine)


Recommended Root version:
-------------------------
The current recommended root version to use with the SusyFitter package is:
root *v5.32-patches*. To check out the source, do:
--> svn co http://root.cern.ch/svn/root/branches/v5-32-00-patches root
To install, follow the instructions in README/INSTALL.


Compilation:
------------
cd src
make
cd ..


Input data (optional, needed for tutorial):
-------------------------------------------
cd data
ln -s /afs/cern.ch/atlas/groups/susy/1lepton/samples/susyElectron.root susyElectron.root
ln -s /afs/cern.ch/atlas/groups/susy/1lepton/samples/susyMuon.root susyMuon.root
cd ..


Running the examples:
---------------------

0. To explore HistFitter usage:
HistFitter.py -usage
HistFitter.py python/MySusyFitterConfig.py

# at CERN
cd data
ln -s /afs/cern.ch/atlas/groups/susy/1lepton/samples/susyElectronWithScale.root
ln -s /afs/cern.ch/atlas/groups/susy/1lepton/samples/susyMuonWithScale.root
cd -
HistFitter.py -t -i python/MySusyFitterConfig.py

1. To make root files containing pdfs (workspaces) for each grid point of a simple counting experiment, 
take a look at the examples in: scripts/README

2. To create contour plots based on these root files, take a look at the examples in:
macros/Examples/contourplot/README

3. Construct one simple counting experiment, where you set the signal expectation, errors, and error treatment yourself:
analysis/simplechannel/README

4. To fit the simple counting experiment created under 3, look at:
macros/Examples/fittest/README

5. To make a nice upper limit (and get the upper limit value) of the counting experiment 
created under 3, look at:
macros/Examples/upperlimit/README

6. To get discovery or exclusion p-values, with various limit setting methods, see:
macros/Examples/p-values/README


Directory structure:
--------------------
analysis ## contains all files related to an analysis. E.g. ZeroLepton/
data     ## contains data text files, provided externally, used to create workspaces for analysis
doc      ## documentation
lib	 ## location shared libary
macros	 ## macros for making plots, testing the fit, ongoing work, etc
python	 ## pyton base classes
results  ## where root files with workspaces generated by HistFactory get stored
scripts	 ## scripts for making workspaces based on text files in data/ . Scripts for submitting batch jobs.
src	 ## source code to make workspaces, do toys.


WebSVN:
-------
https://svnweb.cern.ch/trac/atlasphys/browser/Physics/SUSY/Analyses/HistFitter/trunk


svn package tips:
-----------------
1. At CERN:
export SVNPHYS="svn+ssh://svn.cern.ch/reps/atlasphys"
svn co $SVNPHYS/Physics/SUSY/Analyses/HistFitter/trunk HistFitter

2. To checkout with a different username (e.g. on your lapton), do:
export SVNPHYS="svn+ssh://CERNUSERNAME@svn.cern.ch/reps/atlasphys"
svn co $SVNPHYS/Physics/SUSY/Analyses/HistFitter/trunk HistFitter

svn up -r 14439 configManager.py


... where CERNUSERNAMEHERE is your CERN username.

3. Tagging:
svn cp . $SVNPHYS/Physics/SUSY/Analyses/HistFitter/tags/HistFitter-00-00-01 -m "tagging message"

Don't forget to update ChangeLog before tagging!


